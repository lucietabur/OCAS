<?php

namespace OCAS\OCASBundle\Repository;

/**
 * SessionRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class SessionRepository extends \Doctrine\ORM\EntityRepository
{
    /**
    * Compte toutes les sessions d'emargement de l'annee en cours
    */
    public function nombreSessions()
    {
        $annee = new date("Y");
        $builder = $this->createQueryBuilder('a');
        $builder->select('COUNT(a.id) AS nombre')
            ->where('a.date_debut LIKE "'.$annee.'%"')
            ->orderBy('a.date_debut');
        return $builder->getQuery()->getSingleScalarResult();
    }
}
